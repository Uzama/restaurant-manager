{
  "version": 4,
  "terraform_version": "1.3.1",
  "serial": 2019,
  "lineage": "605761da-90fc-2a5a-d852-11772528d41f",
  "outputs": {},
  "resources": [
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "add_menue_item_request",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#foreach($item in $context.args.input.entrySet())\n    #set($item.value=$item.value.replace(\"'\", \"''\"))\n    #set($item.value=$item.value.replace(\"\\\", \"\\\\\\\\\"))\n    #set($item.value=$item.value.replace('\"', '\\\\\\\"'))\n#end\n#foreach($item in $context.args.entrySet())\n    #set($item.value=$item.value.replace(\"'\", \"''\"))\n    #set($item.value=$item.value.replace(\"\\\", \"\\\\\\\\\"))\n    #set($item.value=$item.value.replace('\"', '\\\\\\\"'))\n#end\n\n#set($process_id=$util.defaultIfNullOrEmpty($ctx.args.input.id,$utils.autoId()))\n\n{\n    \"version\": \"2018-05-29\",\n    \"statements\": [\n        \"INSERT INTO restaurant.menu_items (id, restaurant_username, name, description, price) VALUES ('$process_id','$context.args.input.restaurantUsername', '$context.args.input.name', '$context.args.input.description', '$context.args.input.price')\",\n        \"SELECT id FROM restaurant.menu_items where id = '$process_id'\"\n    ]\n}",
            "content_base64": "I2ZvcmVhY2goJGl0ZW0gaW4gJGNvbnRleHQuYXJncy5pbnB1dC5lbnRyeVNldCgpKQogICAgI3NldCgkaXRlbS52YWx1ZT0kaXRlbS52YWx1ZS5yZXBsYWNlKCInIiwgIicnIikpCiAgICAjc2V0KCRpdGVtLnZhbHVlPSRpdGVtLnZhbHVlLnJlcGxhY2UoIlwiLCAiXFxcXCIpKQogICAgI3NldCgkaXRlbS52YWx1ZT0kaXRlbS52YWx1ZS5yZXBsYWNlKCciJywgJ1xcXCInKSkKI2VuZAojZm9yZWFjaCgkaXRlbSBpbiAkY29udGV4dC5hcmdzLmVudHJ5U2V0KCkpCiAgICAjc2V0KCRpdGVtLnZhbHVlPSRpdGVtLnZhbHVlLnJlcGxhY2UoIiciLCAiJyciKSkKICAgICNzZXQoJGl0ZW0udmFsdWU9JGl0ZW0udmFsdWUucmVwbGFjZSgiXCIsICJcXFxcIikpCiAgICAjc2V0KCRpdGVtLnZhbHVlPSRpdGVtLnZhbHVlLnJlcGxhY2UoJyInLCAnXFxcIicpKQojZW5kCgojc2V0KCRwcm9jZXNzX2lkPSR1dGlsLmRlZmF1bHRJZk51bGxPckVtcHR5KCRjdHguYXJncy5pbnB1dC5pZCwkdXRpbHMuYXV0b0lkKCkpKQoKewogICAgInZlcnNpb24iOiAiMjAxOC0wNS0yOSIsCiAgICAic3RhdGVtZW50cyI6IFsKICAgICAgICAiSU5TRVJUIElOVE8gcmVzdGF1cmFudC5tZW51X2l0ZW1zIChpZCwgcmVzdGF1cmFudF91c2VybmFtZSwgbmFtZSwgZGVzY3JpcHRpb24sIHByaWNlKSBWQUxVRVMgKCckcHJvY2Vzc19pZCcsJyRjb250ZXh0LmFyZ3MuaW5wdXQucmVzdGF1cmFudFVzZXJuYW1lJywgJyRjb250ZXh0LmFyZ3MuaW5wdXQubmFtZScsICckY29udGV4dC5hcmdzLmlucHV0LmRlc2NyaXB0aW9uJywgJyRjb250ZXh0LmFyZ3MuaW5wdXQucHJpY2UnKSIsCiAgICAgICAgIlNFTEVDVCBpZCBGUk9NIHJlc3RhdXJhbnQubWVudV9pdGVtcyB3aGVyZSBpZCA9ICckcHJvY2Vzc19pZCciCiAgICBdCn0=",
            "content_base64sha256": "XPXYJryUxcb/ZdHrlY5fyW34wkmWQ3XWlewsbRIMOiw=",
            "content_base64sha512": "+69yxxO5uguWRpHWZByYr+4MI21lwI7lopIFw34/7wdal6qUo7EzLifPAcqZlDCD8gFJcOHrDHfB66W/Og+aSg==",
            "content_md5": "49aa98c59a076321b00fa89774714337",
            "content_sha1": "f8904d5dfe1a188b316903afca4f7f33e261038d",
            "content_sha256": "5cf5d826bc94c5c6ff65d1eb958e5fc96df8c249964375d695ec2c6d120c3a2c",
            "content_sha512": "fbaf72c713b9ba0b964691d6641c98afee0c236d65c08ee5a29205c37e3fef075a97aa94a3b1332e27cf01ca99943083f2014970e1eb0c77c1eba5bf3a0f9a4a",
            "filename": "appsync/templates/add_menue_item_request.vtl",
            "id": "f8904d5dfe1a188b316903afca4f7f33e261038d"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "add_menue_item_response",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($utils.rds.toJsonObject($ctx.result)[0][0])",
            "content_base64": "I2lmKCRjdHguZXJyb3IpCiAgICAkdXRpbHMuZXJyb3IoJGN0eC5lcnJvci5tZXNzYWdlLCAkY3R4LmVycm9yLnR5cGUpCiNlbmQKCiR1dGlscy50b0pzb24oJHV0aWxzLnJkcy50b0pzb25PYmplY3QoJGN0eC5yZXN1bHQpWzBdWzBdKQ==",
            "content_base64sha256": "Yg+VKseP+SIo9WzYWIzwx0xV4V+BW3EMq1I8FcHlfUA=",
            "content_base64sha512": "CzCnSHPVOaLCikYA3aj/ImMxqqoDYSzQ8eAo/NpueGsBftyvkiB8Ki5nSPIl/9xheYHCRMSvPhBssk/FMyimAw==",
            "content_md5": "6507cc68a093b0fc2d92939846acbb15",
            "content_sha1": "8ba36e71c72e7eb252278c350f338ab29711faed",
            "content_sha256": "620f952ac78ff92228f56cd8588cf0c74c55e15f815b710cab523c15c1e57d40",
            "content_sha512": "0b30a74873d539a2c28a4600dda8ff226331aaaa03612cd0f1e028fcda6e786b017edcaf92207c2a2e6748f225ffdc617981c244c4af3e106cb24fc53328a603",
            "filename": "appsync/templates/add_menue_item_response.vtl",
            "id": "8ba36e71c72e7eb252278c350f338ab29711faed"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "appsync_schema",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "schema {\n    query: Query\n    mutation: Mutation\n}\n\ntype Query {\n    getMenue(restaurantUsername:String!):[MenueItems]\n    listRestaurant:[Restaurant!]\n}\n\ntype Mutation {\n    addMenueItem(input: AddMenueItem!): ID!\n    deleteMenueItem(id:ID!): ID!\n    createRestaurant(input: CreateRestaurant!): String!\n    deleteRestaurant(restaurantUsername:String!): String\n}\n\ntype MenueItems {\n    id: ID\n    name: String!\n    description: String\n    price: Int!\n}\n\ninput AddMenueItem {\n    restaurantUsername: String!\n    name: String!\n    description: String\n    price: Int!\n}\n\ntype Restaurant {\n    username: String!\n    email: String!\n    name: String!\n    address: String\n    phone: String\n}\n\ninput CreateRestaurant {\n    email: String!\n    password: String!\n    name: String!\n    address: String\n    phone: String\n}",
            "content_base64": "c2NoZW1hIHsKICAgIHF1ZXJ5OiBRdWVyeQogICAgbXV0YXRpb246IE11dGF0aW9uCn0KCnR5cGUgUXVlcnkgewogICAgZ2V0TWVudWUocmVzdGF1cmFudFVzZXJuYW1lOlN0cmluZyEpOltNZW51ZUl0ZW1zXQogICAgbGlzdFJlc3RhdXJhbnQ6W1Jlc3RhdXJhbnQhXQp9Cgp0eXBlIE11dGF0aW9uIHsKICAgIGFkZE1lbnVlSXRlbShpbnB1dDogQWRkTWVudWVJdGVtISk6IElEIQogICAgZGVsZXRlTWVudWVJdGVtKGlkOklEISk6IElEIQogICAgY3JlYXRlUmVzdGF1cmFudChpbnB1dDogQ3JlYXRlUmVzdGF1cmFudCEpOiBTdHJpbmchCiAgICBkZWxldGVSZXN0YXVyYW50KHJlc3RhdXJhbnRVc2VybmFtZTpTdHJpbmchKTogU3RyaW5nCn0KCnR5cGUgTWVudWVJdGVtcyB7CiAgICBpZDogSUQKICAgIG5hbWU6IFN0cmluZyEKICAgIGRlc2NyaXB0aW9uOiBTdHJpbmcKICAgIHByaWNlOiBJbnQhCn0KCmlucHV0IEFkZE1lbnVlSXRlbSB7CiAgICByZXN0YXVyYW50VXNlcm5hbWU6IFN0cmluZyEKICAgIG5hbWU6IFN0cmluZyEKICAgIGRlc2NyaXB0aW9uOiBTdHJpbmcKICAgIHByaWNlOiBJbnQhCn0KCnR5cGUgUmVzdGF1cmFudCB7CiAgICB1c2VybmFtZTogU3RyaW5nIQogICAgZW1haWw6IFN0cmluZyEKICAgIG5hbWU6IFN0cmluZyEKICAgIGFkZHJlc3M6IFN0cmluZwogICAgcGhvbmU6IFN0cmluZwp9CgppbnB1dCBDcmVhdGVSZXN0YXVyYW50IHsKICAgIGVtYWlsOiBTdHJpbmchCiAgICBwYXNzd29yZDogU3RyaW5nIQogICAgbmFtZTogU3RyaW5nIQogICAgYWRkcmVzczogU3RyaW5nCiAgICBwaG9uZTogU3RyaW5nCn0=",
            "content_base64sha256": "TFG5ta5Qpf0Bdzc5hnQGSC1KaYHzOWdIBudmWV7G9s0=",
            "content_base64sha512": "ATRryqpnsMHwZSORd4QjFjDkxxfYT8ibbT+fJZOsPICj9GPjEMTkbfwesxIyXur8zDkyk6Uo8wMWfv1nc86twQ==",
            "content_md5": "70f79fdb78b8b71c12badcceffda478f",
            "content_sha1": "0d80c846cbe1973b2b8dc8b8ad961a5de8ceefbd",
            "content_sha256": "4c51b9b5ae50a5fd01773739867406482d4a6981f339674806e766595ec6f6cd",
            "content_sha512": "01346bcaaa67b0c1f06523917784231630e4c717d84fc89b6d3f9f2593ac3c80a3f463e310c4e46dfc1eb312325eeafccc393293a528f303167efd6773ceadc1",
            "filename": "appsync/appsync-schema.graphql",
            "id": "0d80c846cbe1973b2b8dc8b8ad961a5de8ceefbd"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "create_cognito_user_request",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#set($data = {\n    \"action\": \"CREATE\",\n    \"email\": $ctx.args.input.email,\n    \"password\": $ctx.args.input.password,\n    \"name\": $ctx.args.input.name,\n    \"address\": $ctx.args.input.address,\n    \"phone\": $ctx.args.input.phone\n})\n{\n  \"operation\": \"Invoke\",\n  \"payload\": $util.toJson($data)\n}",
            "content_base64": "I3NldCgkZGF0YSA9IHsKICAgICJhY3Rpb24iOiAiQ1JFQVRFIiwKICAgICJlbWFpbCI6ICRjdHguYXJncy5pbnB1dC5lbWFpbCwKICAgICJwYXNzd29yZCI6ICRjdHguYXJncy5pbnB1dC5wYXNzd29yZCwKICAgICJuYW1lIjogJGN0eC5hcmdzLmlucHV0Lm5hbWUsCiAgICAiYWRkcmVzcyI6ICRjdHguYXJncy5pbnB1dC5hZGRyZXNzLAogICAgInBob25lIjogJGN0eC5hcmdzLmlucHV0LnBob25lCn0pCnsKICAib3BlcmF0aW9uIjogIkludm9rZSIsCiAgInBheWxvYWQiOiAkdXRpbC50b0pzb24oJGRhdGEpCn0=",
            "content_base64sha256": "dxhiIrxf7YTos2DC7f/4BNdzy3PUi0lqWOYrCEa44Lk=",
            "content_base64sha512": "KNaondT2MzVuzF8jL+xf30Gi++Ig+rgjSaS8lgUBmm3GFzUes1ItO5p+gOL8vkwCooArQk2JTaVV4YeZyZzl8A==",
            "content_md5": "c94d19b8a0cbf4cb1a456a15bb887d0a",
            "content_sha1": "b68cf6415d68194083fdcfad94fed066994a1d55",
            "content_sha256": "77186222bc5fed84e8b360c2edfff804d773cb73d48b496a58e62b0846b8e0b9",
            "content_sha512": "28d6a89dd4f633356ecc5f232fec5fdf41a2fbe220fab82349a4bc9605019a6dc617351eb3522d3b9a7e80e2fcbe4c02a2802b424d894da555e18799c99ce5f0",
            "filename": "appsync/templates/create_cognito_user_request.vtl",
            "id": "b68cf6415d68194083fdcfad94fed066994a1d55"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "create_cognito_user_response",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($context.result)",
            "content_base64": "I2lmKCRjdHguZXJyb3IpCiAgICAkdXRpbHMuZXJyb3IoJGN0eC5lcnJvci5tZXNzYWdlLCAkY3R4LmVycm9yLnR5cGUpCiNlbmQKCiR1dGlscy50b0pzb24oJGNvbnRleHQucmVzdWx0KQ==",
            "content_base64sha256": "yKRrFNEBbTxSmqSJpqKFcqjm0Dqk9nxxooVTSVnU1tw=",
            "content_base64sha512": "RAtze3jVWrppehjVarj6xN5nGsXj5QXN51Z0p+hpOdRbir+4oWn51RNFAyBoM5PBvtaAe8dpTi58XXoyNoDoqw==",
            "content_md5": "71f56feacc9a2073d4886547eba919bd",
            "content_sha1": "61b1a444fbe8e92d4315b3dfc4b0988fa2835bcb",
            "content_sha256": "c8a46b14d1016d3c529aa489a6a28572a8e6d03aa4f67c71a285534959d4d6dc",
            "content_sha512": "440b737b78d55aba697a18d56ab8fac4de671ac5e3e505cde75674a7e86939d45b8abfb8a169f9d513450320683393c1bed6807bc7694e2e7c5d7a323680e8ab",
            "filename": "appsync/templates/create_cognito_user_response.vtl",
            "id": "61b1a444fbe8e92d4315b3dfc4b0988fa2835bcb"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "create_restaurant_request",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#set($address=$util.defaultIfNullOrEmpty($ctx.args.input.address, ''))\n#set($phone=$util.defaultIfNullOrEmpty($ctx.args.input.phone, ''))\n#set($username=$util.defaultIfNullOrEmpty($ctx.args.input.username, ''))\n\n{\n    \"version\": \"2018-05-29\",\n    \"statements\": [\n        \"INSERT INTO restaurant.restaurants (username, name, address, phone) VALUES ('$username', '$context.args.input.name', '$address', '$phone')\",\n        \"SELECT username FROM restaurant.restaurants where username = '$username'\"\n    ]\n}\n\n\n",
            "content_base64": "I3NldCgkYWRkcmVzcz0kdXRpbC5kZWZhdWx0SWZOdWxsT3JFbXB0eSgkY3R4LmFyZ3MuaW5wdXQuYWRkcmVzcywgJycpKQojc2V0KCRwaG9uZT0kdXRpbC5kZWZhdWx0SWZOdWxsT3JFbXB0eSgkY3R4LmFyZ3MuaW5wdXQucGhvbmUsICcnKSkKI3NldCgkdXNlcm5hbWU9JHV0aWwuZGVmYXVsdElmTnVsbE9yRW1wdHkoJGN0eC5hcmdzLmlucHV0LnVzZXJuYW1lLCAnJykpCgp7CiAgICAidmVyc2lvbiI6ICIyMDE4LTA1LTI5IiwKICAgICJzdGF0ZW1lbnRzIjogWwogICAgICAgICJJTlNFUlQgSU5UTyByZXN0YXVyYW50LnJlc3RhdXJhbnRzICh1c2VybmFtZSwgbmFtZSwgYWRkcmVzcywgcGhvbmUpIFZBTFVFUyAoJyR1c2VybmFtZScsICckY29udGV4dC5hcmdzLmlucHV0Lm5hbWUnLCAnJGFkZHJlc3MnLCAnJHBob25lJykiLAogICAgICAgICJTRUxFQ1QgdXNlcm5hbWUgRlJPTSByZXN0YXVyYW50LnJlc3RhdXJhbnRzIHdoZXJlIHVzZXJuYW1lID0gJyR1c2VybmFtZSciCiAgICBdCn0KCgo=",
            "content_base64sha256": "AXQjrOx9AnOvOUZXqaLg/FGqqbyzW0seMP94ZUivweA=",
            "content_base64sha512": "0Y9W1MK9J8laZvZvcgIL3Jwk44a/Ha3IpJ33uXOq9FXALxuoflp2McUDXrZirNGNHomCBbspSxWF8W8jgxCE+g==",
            "content_md5": "ed44e8f2ef81b7685084b32a6edb4553",
            "content_sha1": "2e265f5db1a104a71acbeb3c5847f72b2e60b26e",
            "content_sha256": "017423acec7d0273af394657a9a2e0fc51aaa9bcb35b4b1e30ff786548afc1e0",
            "content_sha512": "d18f56d4c2bd27c95a66f66f72020bdc9c24e386bf1dadc8a49df7b973aaf455c02f1ba87e5a7631c5035eb662acd18d1e898205bb294b1585f16f23831084fa",
            "filename": "appsync/templates/create_restaurant_request.vtl",
            "id": "2e265f5db1a104a71acbeb3c5847f72b2e60b26e"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "create_restaurant_response",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($utils.rds.toJsonObject($ctx.result)[0][0])",
            "content_base64": "I2lmKCRjdHguZXJyb3IpCiAgICAkdXRpbHMuZXJyb3IoJGN0eC5lcnJvci5tZXNzYWdlLCAkY3R4LmVycm9yLnR5cGUpCiNlbmQKCiR1dGlscy50b0pzb24oJHV0aWxzLnJkcy50b0pzb25PYmplY3QoJGN0eC5yZXN1bHQpWzBdWzBdKQ==",
            "content_base64sha256": "Yg+VKseP+SIo9WzYWIzwx0xV4V+BW3EMq1I8FcHlfUA=",
            "content_base64sha512": "CzCnSHPVOaLCikYA3aj/ImMxqqoDYSzQ8eAo/NpueGsBftyvkiB8Ki5nSPIl/9xheYHCRMSvPhBssk/FMyimAw==",
            "content_md5": "6507cc68a093b0fc2d92939846acbb15",
            "content_sha1": "8ba36e71c72e7eb252278c350f338ab29711faed",
            "content_sha256": "620f952ac78ff92228f56cd8588cf0c74c55e15f815b710cab523c15c1e57d40",
            "content_sha512": "0b30a74873d539a2c28a4600dda8ff226331aaaa03612cd0f1e028fcda6e786b017edcaf92207c2a2e6748f225ffdc617981c244c4af3e106cb24fc53328a603",
            "filename": "appsync/templates/create_restaurant_response.vtl",
            "id": "8ba36e71c72e7eb252278c350f338ab29711faed"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "delete_menue_item_request",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "{\n    \"version\": \"2018-05-29\",\n    \"statements\": [\n        \"delete from restaurant.menu_items where id = '$ctx.args.input.id'\"\n    ]\n}",
            "content_base64": "ewogICAgInZlcnNpb24iOiAiMjAxOC0wNS0yOSIsCiAgICAic3RhdGVtZW50cyI6IFsKICAgICAgICAiZGVsZXRlIGZyb20gcmVzdGF1cmFudC5tZW51X2l0ZW1zIHdoZXJlIGlkID0gJyRjdHguYXJncy5pbnB1dC5pZCciCiAgICBdCn0=",
            "content_base64sha256": "E2NN+h5yfoa3enzMEtCg4gb9GFrK5htfPxzau3Nrufw=",
            "content_base64sha512": "ehUpk9fOdflvza5HxFEkTys5/LWYnmzjwep/kcHrlA3eF89u9EcBpkEeGfEb2j2CbHHlJFQbVKL8qYgb2CEA9A==",
            "content_md5": "c59ea99f053804263ce7a9a7b910f4f2",
            "content_sha1": "06422ea8eb79f072220f3420bae50ea24e448d35",
            "content_sha256": "13634dfa1e727e86b77a7ccc12d0a0e206fd185acae61b5f3f1cdabb736bb9fc",
            "content_sha512": "7a152993d7ce75f96fcdae47c451244f2b39fcb5989e6ce3c1ea7f91c1eb940dde17cf6ef44701a6411e19f11bda3d826c71e524541b54a2fca9881bd82100f4",
            "filename": "appsync/templates/delete_menue_item_request.vtl",
            "id": "06422ea8eb79f072220f3420bae50ea24e448d35"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "delete_menue_item_response",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n$utils.toJson($utils.rds.toJsonObject($ctx.result)[0])",
            "content_base64": "I2lmKCRjdHguZXJyb3IpCiAgICAkdXRpbHMuZXJyb3IoJGN0eC5lcnJvci5tZXNzYWdlLCAkY3R4LmVycm9yLnR5cGUpCiNlbmQKJHV0aWxzLnRvSnNvbigkdXRpbHMucmRzLnRvSnNvbk9iamVjdCgkY3R4LnJlc3VsdClbMF0p",
            "content_base64sha256": "vjNQZRQBiEI+jp+2Y0jy5LhaohBc6XuOXdqF/SsTquc=",
            "content_base64sha512": "8d0k9Ctngam6ajl+Qk+8IpR+00D1QJVJT6ohwiKGxv9JoyLckF22dGmwXMCnp85LiHiTSZjvSpl2ofSw9t4gqw==",
            "content_md5": "80e779f5392f09fa0181eb447b800233",
            "content_sha1": "b29679b5517562a9028edda90a4f4314563e1b57",
            "content_sha256": "be335065140188423e8e9fb66348f2e4b85aa2105ce97b8e5dda85fd2b13aae7",
            "content_sha512": "f1dd24f42b6781a9ba6a397e424fbc22947ed340f54095494faa21c22286c6ff49a322dc905db67469b05cc0a7a7ce4b8878934998ef4a9976a1f4b0f6de20ab",
            "filename": "appsync/templates/delete_menue_item_response.vtl",
            "id": "b29679b5517562a9028edda90a4f4314563e1b57"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "get_menue_request",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "{\n    \"version\": \"2018-05-29\",\n    \"statements\": [\n         \"SELECT id, name, description, price FROM restaurant.menu_items WHERE restaurant_username = '$ctx.args.restaurantUsername'\"\n    ]\n}",
            "content_base64": "ewogICAgInZlcnNpb24iOiAiMjAxOC0wNS0yOSIsCiAgICAic3RhdGVtZW50cyI6IFsKICAgICAgICAgIlNFTEVDVCBpZCwgbmFtZSwgZGVzY3JpcHRpb24sIHByaWNlIEZST00gcmVzdGF1cmFudC5tZW51X2l0ZW1zIFdIRVJFIHJlc3RhdXJhbnRfdXNlcm5hbWUgPSAnJGN0eC5hcmdzLnJlc3RhdXJhbnRVc2VybmFtZSciCiAgICBdCn0=",
            "content_base64sha256": "l9aiaLXrPDJ8PjsmDfFgQTubFvLKtSh0kXvjKjMgDLs=",
            "content_base64sha512": "rDIhrw5gXfdb8QiABYE8mx1RN+Xp25rOgQUEGFs7rNRmgBC7IEjI2Q0ywjPDDKATnbrpRMX1N0ECZe1roe8eBQ==",
            "content_md5": "98f4c1ee5a3f129482b5e6245e3f076c",
            "content_sha1": "44ecfec80f4b3a8fbf01551992ac27f49118afda",
            "content_sha256": "97d6a268b5eb3c327c3e3b260df160413b9b16f2cab52874917be32a33200cbb",
            "content_sha512": "ac3221af0e605df75bf1088005813c9b1d5137e5e9db9ace810504185b3bacd4668010bb2048c8d90d32c233c30ca0139dbae944c5f537410265ed6ba1ef1e05",
            "filename": "appsync/templates/get_menue_request.vtl",
            "id": "44ecfec80f4b3a8fbf01551992ac27f49118afda"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "get_menue_response",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($utils.rds.toJsonObject($ctx.result)[0])",
            "content_base64": "I2lmKCRjdHguZXJyb3IpCiAgICAkdXRpbHMuZXJyb3IoJGN0eC5lcnJvci5tZXNzYWdlLCAkY3R4LmVycm9yLnR5cGUpCiNlbmQKCiR1dGlscy50b0pzb24oJHV0aWxzLnJkcy50b0pzb25PYmplY3QoJGN0eC5yZXN1bHQpWzBdKQ==",
            "content_base64sha256": "DzWCKwwbGDJcdOE5A7R+kLmJCuCwQptgMpR2VaKySzM=",
            "content_base64sha512": "8BmwoaptksJNxJj/Hq4gK3t14xyVhF5Q6d37M3uy/wj9rmzb54OODSRHRJArWRV+idnKNxSzYstXc+tDEv1+GQ==",
            "content_md5": "6a2d9f4792d9caf41ddc1f2a08134e97",
            "content_sha1": "ff624a2bf5862c5bd97a360a45d30af38cb4d760",
            "content_sha256": "0f35822b0c1b18325c74e13903b47e90b9890ae0b0429b6032947655a2b24b33",
            "content_sha512": "f019b0a1aa6d92c24dc498ff1eae202b7b75e31c95845e50e9ddfb337bb2ff08fdae6cdbe7838e0d244744902b59157e89d9ca3714b362cb5773eb4312fd7e19",
            "filename": "appsync/templates/get_menue_response.vtl",
            "id": "ff624a2bf5862c5bd97a360a45d30af38cb4d760"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "pipeline_after_request",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($context.prev.result)",
            "content_base64": "I2lmKCRjdHguZXJyb3IpCiAgICAkdXRpbHMuZXJyb3IoJGN0eC5lcnJvci5tZXNzYWdlLCAkY3R4LmVycm9yLnR5cGUpCiNlbmQKCiR1dGlscy50b0pzb24oJGNvbnRleHQucHJldi5yZXN1bHQp",
            "content_base64sha256": "Utxq5cyZlWhdh8KebLOgOvBco66Tf5tUIM8GPAMSXqE=",
            "content_base64sha512": "wmj0Y6BigMdRpA8R/8gFpG7RUKJrBr1Kgmcg+1ZBJ4e1Hlexe2/6TRPraSKphcbfWqzEUepi4I2hz/Bsf8iZKg==",
            "content_md5": "10eda4cb7d126aa3d3d22aa7e0840bdb",
            "content_sha1": "bb7fdc7f6f4ebaf27088685b4c992867f6a1d0b8",
            "content_sha256": "52dc6ae5cc9995685d87c29e6cb3a03af05ca3ae937f9b5420cf063c03125ea1",
            "content_sha512": "c268f463a06280c751a40f11ffc805a46ed150a26b06bd4a826720fb56412787b51e57b17b6ffa4d13eb6922a985c6df5aacc451ea62e08da1cff06c7fc8992a",
            "filename": "appsync/templates/pipeline_after_request.vtl",
            "id": "bb7fdc7f6f4ebaf27088685b4c992867f6a1d0b8"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "local_file",
      "name": "pipeline_before_request",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#foreach($item in $context.args.input.entrySet())\n    #set($item.value=$item.value.replace(\"'\", \"''\"))\n    #set($item.value=$item.value.replace(\"\\\", \"\\\\\\\\\"))\n    #set($item.value=$item.value.replace('\"', '\\\\\\\"'))\n#end\n#foreach($item in $context.args.entrySet())\n    #set($item.value=$item.value.replace(\"'\", \"''\"))\n    #set($item.value=$item.value.replace(\"\\\", \"\\\\\\\\\"))\n    #set($item.value=$item.value.replace('\"', '\\\\\\\"'))\n#end\n{}",
            "content_base64": "I2ZvcmVhY2goJGl0ZW0gaW4gJGNvbnRleHQuYXJncy5pbnB1dC5lbnRyeVNldCgpKQogICAgI3NldCgkaXRlbS52YWx1ZT0kaXRlbS52YWx1ZS5yZXBsYWNlKCInIiwgIicnIikpCiAgICAjc2V0KCRpdGVtLnZhbHVlPSRpdGVtLnZhbHVlLnJlcGxhY2UoIlwiLCAiXFxcXCIpKQogICAgI3NldCgkaXRlbS52YWx1ZT0kaXRlbS52YWx1ZS5yZXBsYWNlKCciJywgJ1xcXCInKSkKI2VuZAojZm9yZWFjaCgkaXRlbSBpbiAkY29udGV4dC5hcmdzLmVudHJ5U2V0KCkpCiAgICAjc2V0KCRpdGVtLnZhbHVlPSRpdGVtLnZhbHVlLnJlcGxhY2UoIiciLCAiJyciKSkKICAgICNzZXQoJGl0ZW0udmFsdWU9JGl0ZW0udmFsdWUucmVwbGFjZSgiXCIsICJcXFxcIikpCiAgICAjc2V0KCRpdGVtLnZhbHVlPSRpdGVtLnZhbHVlLnJlcGxhY2UoJyInLCAnXFxcIicpKQojZW5kCnt9",
            "content_base64sha256": "fcz7JJ1NEr7GzfgCn6BSydQ9ae9hIiSNzPXgX21qUjM=",
            "content_base64sha512": "4JO7jOhvicf28oVmohj+wfJxaxbH9i6r+MzftBEPx5aWL62PfKCkB3K30lYHhxJ/DEUOOiwcIcRshRCy0q93yA==",
            "content_md5": "8f5a2efe40fb55e362670e4d36b73999",
            "content_sha1": "a6d84a91d528f822098295451eca348ac197e666",
            "content_sha256": "7dccfb249d4d12bec6cdf8029fa052c9d43d69ef6122248dccf5e05f6d6a5233",
            "content_sha512": "e093bb8ce86f89c7f6f28566a218fec1f2716b16c7f62eabf8ccdfb4110fc796962fad8f7ca0a40772b7d2560787127f0c450e3a2c1c21c46c8510b2d2af77c8",
            "filename": "appsync/templates/pipeline_before_request.vtl",
            "id": "a6d84a91d528f822098295451eca348ac197e666"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "cognito_user_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "lk3q4mqg3bhgrlfkvdinia6dbe",
            "arn": "arn:aws:appsync:us-east-1:617942035950:apis/lk3q4mqg3bhgrlfkvdinia6dbe/datasources/CognitoUser",
            "description": "",
            "dynamodb_config": [],
            "elasticsearch_config": [],
            "event_bridge_config": [],
            "http_config": [],
            "id": "lk3q4mqg3bhgrlfkvdinia6dbe-CognitoUser",
            "lambda_config": [
              {
                "function_arn": "arn:aws:lambda:us-east-1:617942035950:function:cognito-user-function"
              }
            ],
            "name": "CognitoUser",
            "opensearchservice_config": [],
            "relational_database_config": [],
            "service_role_arn": "arn:aws:iam::617942035950:role/restaurant-manager-appsync",
            "type": "AWS_LAMBDA"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.appsync_api",
            "module.appsync.data.local_file.appsync_schema",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client",
            "module.iam.aws_iam_role.appsync-role",
            "module.iam.aws_iam_role.lambda-role",
            "module.lambda.aws_lambda_function.cognito-user"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_function",
      "name": "create_cognito_user_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "lk3q4mqg3bhgrlfkvdinia6dbe",
            "arn": "arn:aws:appsync:us-east-1:617942035950:apis/lk3q4mqg3bhgrlfkvdinia6dbe/functions/ekxufmin65a3jbxwaj3zqgpfjm",
            "code": "",
            "data_source": "CognitoUser",
            "description": "",
            "function_id": "ekxufmin65a3jbxwaj3zqgpfjm",
            "function_version": "2018-05-29",
            "id": "lk3q4mqg3bhgrlfkvdinia6dbe-ekxufmin65a3jbxwaj3zqgpfjm",
            "max_batch_size": 0,
            "name": "CreateCognitoUser",
            "request_mapping_template": "#set($data = {\n    \"action\": \"CREATE\",\n    \"email\": $ctx.args.input.email,\n    \"password\": $ctx.args.input.password,\n    \"name\": $ctx.args.input.name,\n    \"address\": $ctx.args.input.address,\n    \"phone\": $ctx.args.input.phone\n})\n{\n  \"operation\": \"Invoke\",\n  \"payload\": $util.toJson($data)\n}",
            "response_mapping_template": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($context.result)",
            "runtime": [],
            "sync_config": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_datasource.cognito_user_lambda",
            "module.appsync.aws_appsync_graphql_api.appsync_api",
            "module.appsync.data.local_file.appsync_schema",
            "module.appsync.data.local_file.create_cognito_user_request",
            "module.appsync.data.local_file.create_cognito_user_response",
            "module.appsync.null_resource.appsync_rds_datasource",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client",
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant",
            "module.iam.aws_iam_role.appsync-role",
            "module.iam.aws_iam_role.lambda-role",
            "module.lambda.aws_lambda_function.cognito-user"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_function",
      "name": "create_restaurant_function",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "lk3q4mqg3bhgrlfkvdinia6dbe",
            "arn": "arn:aws:appsync:us-east-1:617942035950:apis/lk3q4mqg3bhgrlfkvdinia6dbe/functions/wuckotl32jcixeldeaex75hmgi",
            "code": "",
            "data_source": "AuroraRDS",
            "description": "",
            "function_id": "wuckotl32jcixeldeaex75hmgi",
            "function_version": "2018-05-29",
            "id": "lk3q4mqg3bhgrlfkvdinia6dbe-wuckotl32jcixeldeaex75hmgi",
            "max_batch_size": 0,
            "name": "createRestaurantFunction",
            "request_mapping_template": "#set($address=$util.defaultIfNullOrEmpty($ctx.args.input.address, ''))\n#set($phone=$util.defaultIfNullOrEmpty($ctx.args.input.phone, ''))\n#set($username=$util.defaultIfNullOrEmpty($ctx.args.input.username, ''))\n\n{\n    \"version\": \"2018-05-29\",\n    \"statements\": [\n        \"INSERT INTO restaurant.restaurants (username, name, address, phone) VALUES ('$username', '$context.args.input.name', '$address', '$phone')\",\n        \"SELECT username FROM restaurant.restaurants where username = '$username'\"\n    ]\n}\n\n\n",
            "response_mapping_template": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($utils.rds.toJsonObject($ctx.result)[0][0])",
            "runtime": [],
            "sync_config": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.appsync_api",
            "module.appsync.data.local_file.appsync_schema",
            "module.appsync.data.local_file.create_restaurant_request",
            "module.appsync.data.local_file.create_restaurant_response",
            "module.appsync.null_resource.appsync_rds_datasource",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client",
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant",
            "module.iam.aws_iam_role.appsync-role"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_graphql_api",
      "name": "appsync_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_authentication_provider": [
              {
                "authentication_type": "API_KEY",
                "lambda_authorizer_config": [],
                "openid_connect_config": [],
                "user_pool_config": []
              }
            ],
            "arn": "arn:aws:appsync:us-east-1:617942035950:apis/lk3q4mqg3bhgrlfkvdinia6dbe",
            "authentication_type": "AMAZON_COGNITO_USER_POOLS",
            "id": "lk3q4mqg3bhgrlfkvdinia6dbe",
            "lambda_authorizer_config": [],
            "log_config": [],
            "name": "Cognito",
            "openid_connect_config": [],
            "schema": "schema {\n    query: Query\n    mutation: Mutation\n}\n\ntype Query {\n    getMenue(restaurantUsername:String!):[MenueItems]\n    listRestaurant:[Restaurant!]\n}\n\ntype Mutation {\n    addMenueItem(input: AddMenueItem!): ID!\n    deleteMenueItem(id:ID!): ID!\n    createRestaurant(input: CreateRestaurant!): String!\n    deleteRestaurant(restaurantUsername:String!): String\n}\n\ntype MenueItems {\n    id: ID\n    name: String!\n    description: String\n    price: Int!\n}\n\ninput AddMenueItem {\n    restaurantUsername: String!\n    name: String!\n    description: String\n    price: Int!\n}\n\ntype Restaurant {\n    username: String!\n    email: String!\n    name: String!\n    address: String\n    phone: String\n}\n\ninput CreateRestaurant {\n    email: String!\n    password: String!\n    name: String!\n    address: String\n    phone: String\n}",
            "tags": {},
            "tags_all": {},
            "uris": {
              "GRAPHQL": "https://cajvq4hudvaqnemhczorolay7a.appsync-api.us-east-1.amazonaws.com/graphql",
              "REALTIME": "wss://cajvq4hudvaqnemhczorolay7a.appsync-realtime-api.us-east-1.amazonaws.com/graphql"
            },
            "user_pool_config": [
              {
                "app_id_client_regex": "76q8o53d4tq18a11q6sqcjmnsj",
                "aws_region": "us-east-1",
                "default_action": "ALLOW",
                "user_pool_id": "us-east-1_ozrrxONLX"
              }
            ],
            "xray_enabled": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.data.local_file.appsync_schema",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "add_menue_item",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "lk3q4mqg3bhgrlfkvdinia6dbe",
            "arn": "arn:aws:appsync:us-east-1:617942035950:apis/lk3q4mqg3bhgrlfkvdinia6dbe/types/Mutation/resolvers/addMenueItem",
            "caching_config": [],
            "code": "",
            "data_source": "AuroraRDS",
            "field": "addMenueItem",
            "id": "lk3q4mqg3bhgrlfkvdinia6dbe-Mutation-addMenueItem",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "#foreach($item in $context.args.input.entrySet())\n    #set($item.value=$item.value.replace(\"'\", \"''\"))\n    #set($item.value=$item.value.replace(\"\\\", \"\\\\\\\\\"))\n    #set($item.value=$item.value.replace('\"', '\\\\\\\"'))\n#end\n#foreach($item in $context.args.entrySet())\n    #set($item.value=$item.value.replace(\"'\", \"''\"))\n    #set($item.value=$item.value.replace(\"\\\", \"\\\\\\\\\"))\n    #set($item.value=$item.value.replace('\"', '\\\\\\\"'))\n#end\n\n#set($process_id=$util.defaultIfNullOrEmpty($ctx.args.input.id,$utils.autoId()))\n\n{\n    \"version\": \"2018-05-29\",\n    \"statements\": [\n        \"INSERT INTO restaurant.menu_items (id, restaurant_username, name, description, price) VALUES ('$process_id','$context.args.input.restaurantUsername', '$context.args.input.name', '$context.args.input.description', '$context.args.input.price')\",\n        \"SELECT id FROM restaurant.menu_items where id = '$process_id'\"\n    ]\n}",
            "response_template": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($utils.rds.toJsonObject($ctx.result)[0][0])",
            "runtime": [],
            "sync_config": [],
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.appsync_api",
            "module.appsync.data.local_file.add_menue_item_request",
            "module.appsync.data.local_file.add_menue_item_response",
            "module.appsync.data.local_file.appsync_schema",
            "module.appsync.null_resource.appsync_rds_datasource",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client",
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant",
            "module.iam.aws_iam_role.appsync-role"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "create_restaurant",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "lk3q4mqg3bhgrlfkvdinia6dbe",
            "arn": "arn:aws:appsync:us-east-1:617942035950:apis/lk3q4mqg3bhgrlfkvdinia6dbe/types/Mutation/resolvers/createRestaurant",
            "caching_config": [],
            "code": "",
            "data_source": "",
            "field": "createRestaurant",
            "id": "lk3q4mqg3bhgrlfkvdinia6dbe-Mutation-createRestaurant",
            "kind": "PIPELINE",
            "max_batch_size": 0,
            "pipeline_config": [
              {
                "functions": [
                  "ekxufmin65a3jbxwaj3zqgpfjm",
                  "wuckotl32jcixeldeaex75hmgi"
                ]
              }
            ],
            "request_template": "#foreach($item in $context.args.input.entrySet())\n    #set($item.value=$item.value.replace(\"'\", \"''\"))\n    #set($item.value=$item.value.replace(\"\\\", \"\\\\\\\\\"))\n    #set($item.value=$item.value.replace('\"', '\\\\\\\"'))\n#end\n#foreach($item in $context.args.entrySet())\n    #set($item.value=$item.value.replace(\"'\", \"''\"))\n    #set($item.value=$item.value.replace(\"\\\", \"\\\\\\\\\"))\n    #set($item.value=$item.value.replace('\"', '\\\\\\\"'))\n#end\n{}",
            "response_template": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($context.prev.result)",
            "runtime": [],
            "sync_config": [],
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_datasource.cognito_user_lambda",
            "module.appsync.aws_appsync_function.create_cognito_user_lambda",
            "module.appsync.aws_appsync_function.create_restaurant_function",
            "module.appsync.aws_appsync_graphql_api.appsync_api",
            "module.appsync.data.local_file.appsync_schema",
            "module.appsync.data.local_file.create_cognito_user_request",
            "module.appsync.data.local_file.create_cognito_user_response",
            "module.appsync.data.local_file.create_restaurant_request",
            "module.appsync.data.local_file.create_restaurant_response",
            "module.appsync.data.local_file.pipeline_after_request",
            "module.appsync.data.local_file.pipeline_before_request",
            "module.appsync.null_resource.appsync_rds_datasource",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client",
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant",
            "module.iam.aws_iam_role.appsync-role",
            "module.iam.aws_iam_role.lambda-role",
            "module.lambda.aws_lambda_function.cognito-user"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "delete_menue_item",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "lk3q4mqg3bhgrlfkvdinia6dbe",
            "arn": "arn:aws:appsync:us-east-1:617942035950:apis/lk3q4mqg3bhgrlfkvdinia6dbe/types/Mutation/resolvers/deleteMenueItem",
            "caching_config": [],
            "code": "",
            "data_source": "AuroraRDS",
            "field": "deleteMenueItem",
            "id": "lk3q4mqg3bhgrlfkvdinia6dbe-Mutation-deleteMenueItem",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n    \"version\": \"2018-05-29\",\n    \"statements\": [\n        \"delete from restaurant.menu_items where id = '$ctx.args.input.id'\"\n    ]\n}",
            "response_template": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n$utils.toJson($utils.rds.toJsonObject($ctx.result)[0])",
            "runtime": [],
            "sync_config": [],
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.appsync_api",
            "module.appsync.data.local_file.appsync_schema",
            "module.appsync.data.local_file.delete_menue_item_request",
            "module.appsync.data.local_file.delete_menue_item_response",
            "module.appsync.null_resource.appsync_rds_datasource",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client",
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant",
            "module.iam.aws_iam_role.appsync-role"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "get_menue",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "lk3q4mqg3bhgrlfkvdinia6dbe",
            "arn": "arn:aws:appsync:us-east-1:617942035950:apis/lk3q4mqg3bhgrlfkvdinia6dbe/types/Query/resolvers/getMenue",
            "caching_config": [],
            "code": "",
            "data_source": "AuroraRDS",
            "field": "getMenue",
            "id": "lk3q4mqg3bhgrlfkvdinia6dbe-Query-getMenue",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n    \"version\": \"2018-05-29\",\n    \"statements\": [\n         \"SELECT id, name, description, price FROM restaurant.menu_items WHERE restaurant_username = '$ctx.args.restaurantUsername'\"\n    ]\n}",
            "response_template": "#if($ctx.error)\n    $utils.error($ctx.error.message, $ctx.error.type)\n#end\n\n$utils.toJson($utils.rds.toJsonObject($ctx.result)[0])",
            "runtime": [],
            "sync_config": [],
            "type": "Query"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.appsync_api",
            "module.appsync.data.local_file.appsync_schema",
            "module.appsync.data.local_file.get_menue_request",
            "module.appsync.data.local_file.get_menue_response",
            "module.appsync.null_resource.appsync_rds_datasource",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client",
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant",
            "module.iam.aws_iam_role.appsync-role"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "null_resource",
      "name": "appsync_rds_datasource",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4380984873328160926",
            "triggers": {
              "appsync_api_id": "lk3q4mqg3bhgrlfkvdinia6dbe",
              "appsync_region": "us-east-1"
            }
          },
          "sensitive_attributes": [],
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.appsync_api",
            "module.appsync.data.local_file.appsync_schema",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client",
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant",
            "module.iam.aws_iam_role.appsync-role"
          ]
        }
      ]
    },
    {
      "module": "module.cognito",
      "mode": "managed",
      "type": "aws_cognito_user_group",
      "name": "admin",
      "provider": "module.cognito.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "",
            "id": "us-east-1_ozrrxONLX/admin",
            "name": "admin",
            "precedence": 0,
            "role_arn": "",
            "user_pool_id": "us-east-1_ozrrxONLX"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.cognito.aws_cognito_user_pool.pool"
          ]
        }
      ]
    },
    {
      "module": "module.cognito",
      "mode": "managed",
      "type": "aws_cognito_user_pool",
      "name": "pool",
      "provider": "module.cognito.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_recovery_setting": [
              {
                "recovery_mechanism": [
                  {
                    "name": "verified_email",
                    "priority": 1
                  }
                ]
              }
            ],
            "admin_create_user_config": [
              {
                "allow_admin_create_user_only": false,
                "invite_message_template": []
              }
            ],
            "alias_attributes": null,
            "arn": "arn:aws:cognito-idp:us-east-1:617942035950:userpool/us-east-1_ozrrxONLX",
            "auto_verified_attributes": [
              "email"
            ],
            "creation_date": "2023-05-21T21:01:42Z",
            "custom_domain": "",
            "deletion_protection": "INACTIVE",
            "device_configuration": [],
            "domain": "",
            "email_configuration": [
              {
                "configuration_set": "",
                "email_sending_account": "COGNITO_DEFAULT",
                "from_email_address": "",
                "reply_to_email_address": "",
                "source_arn": ""
              }
            ],
            "email_verification_message": "Your reset password validation code is: {####}",
            "email_verification_subject": "Reset password code",
            "endpoint": "cognito-idp.us-east-1.amazonaws.com/us-east-1_ozrrxONLX",
            "estimated_number_of_users": 19,
            "id": "us-east-1_ozrrxONLX",
            "lambda_config": [],
            "last_modified_date": "2023-05-22T07:46:12Z",
            "mfa_configuration": "OPTIONAL",
            "name": "restaurant-manager",
            "password_policy": [
              {
                "minimum_length": 8,
                "require_lowercase": true,
                "require_numbers": true,
                "require_symbols": false,
                "require_uppercase": true,
                "temporary_password_validity_days": 7
              }
            ],
            "schema": [
              {
                "attribute_data_type": "String",
                "developer_only_attribute": false,
                "mutable": true,
                "name": "email",
                "number_attribute_constraints": [],
                "required": true,
                "string_attribute_constraints": [
                  {
                    "max_length": "100",
                    "min_length": "7"
                  }
                ]
              }
            ],
            "sms_authentication_message": "",
            "sms_configuration": [],
            "sms_verification_message": "",
            "software_token_mfa_configuration": [
              {
                "enabled": false
              }
            ],
            "tags": {
              "Name": "restaurant-manager"
            },
            "tags_all": {
              "Name": "restaurant-manager"
            },
            "user_attribute_update_settings": [],
            "user_pool_add_ons": [
              {
                "advanced_security_mode": "OFF"
              }
            ],
            "username_attributes": [
              "email"
            ],
            "username_configuration": [],
            "verification_message_template": [
              {
                "default_email_option": "CONFIRM_WITH_CODE",
                "email_message": "Your reset password validation code is: {####}",
                "email_message_by_link": "",
                "email_subject": "Reset password code",
                "email_subject_by_link": "",
                "sms_message": ""
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.cognito",
      "mode": "managed",
      "type": "aws_cognito_user_pool_client",
      "name": "client",
      "provider": "module.cognito.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_token_validity": 0,
            "allowed_oauth_flows": [],
            "allowed_oauth_flows_user_pool_client": false,
            "allowed_oauth_scopes": [],
            "analytics_configuration": [],
            "auth_session_validity": 3,
            "callback_urls": [],
            "client_secret": "",
            "default_redirect_uri": "",
            "enable_propagate_additional_user_context_data": false,
            "enable_token_revocation": true,
            "explicit_auth_flows": [
              "ADMIN_NO_SRP_AUTH",
              "USER_PASSWORD_AUTH"
            ],
            "generate_secret": false,
            "id": "76q8o53d4tq18a11q6sqcjmnsj",
            "id_token_validity": 0,
            "logout_urls": [],
            "name": "restaurant-manager",
            "prevent_user_existence_errors": "",
            "read_attributes": [],
            "refresh_token_validity": 30,
            "supported_identity_providers": [],
            "token_validity_units": [],
            "user_pool_id": "us-east-1_ozrrxONLX",
            "write_attributes": []
          },
          "sensitive_attributes": [],
          "dependencies": [
            "module.cognito.aws_cognito_user_pool.pool"
          ]
        }
      ]
    },
    {
      "module": "module.cognito",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "email",
      "provider": "module.cognito.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:us-east-1:617942035950:parameter/restaurant-manager/app/users/root/email",
            "data_type": "text",
            "description": "",
            "id": "/restaurant-manager/app/users/root/email",
            "insecure_value": null,
            "key_id": "",
            "name": "/restaurant-manager/app/users/root/email",
            "overwrite": null,
            "tags": {},
            "tags_all": {},
            "tier": "Standard",
            "type": "String",
            "value": "test@example.com",
            "version": 1
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.cognito",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "password",
      "provider": "module.cognito.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:us-east-1:617942035950:parameter/restaurant-manager/app/users/root/password",
            "data_type": "text",
            "description": "",
            "id": "/restaurant-manager/app/users/root/password",
            "insecure_value": null,
            "key_id": "",
            "name": "/restaurant-manager/app/users/root/password",
            "overwrite": null,
            "tags": {},
            "tags_all": {},
            "tier": "Standard",
            "type": "String",
            "value": "Test1234",
            "version": 1
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.cognito",
      "mode": "managed",
      "type": "null_resource",
      "name": "sputnik_root_user",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "745299497642302255",
            "triggers": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "module.cognito.aws_cognito_user_pool.pool"
          ]
        }
      ]
    },
    {
      "module": "module.cognito",
      "mode": "managed",
      "type": "null_resource",
      "name": "sputnik_root_user_confirm_email",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "6941719419614465200",
            "triggers": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.null_resource.sputnik_root_user"
          ]
        }
      ]
    },
    {
      "module": "module.cognito",
      "mode": "managed",
      "type": "null_resource",
      "name": "sputnik_root_user_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1343590434937052071",
            "triggers": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "module.cognito.aws_cognito_user_group.admin",
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.null_resource.sputnik_root_user"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "aws_rds_cluster",
      "name": "cluster",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocated_storage": 1,
            "allow_major_version_upgrade": null,
            "apply_immediately": null,
            "arn": "arn:aws:rds:us-east-1:617942035950:cluster:restaurant-manager",
            "availability_zones": [
              "us-east-1a",
              "us-east-1b",
              "us-east-1d"
            ],
            "backtrack_window": 0,
            "backup_retention_period": 7,
            "cluster_identifier": "restaurant-manager",
            "cluster_identifier_prefix": null,
            "cluster_members": [],
            "cluster_resource_id": "cluster-J4QCWPZ32QJAJ3ZAHNLXJZ3KTI",
            "copy_tags_to_snapshot": false,
            "database_name": "restaurant",
            "db_cluster_instance_class": "",
            "db_cluster_parameter_group_name": "default.aurora-mysql5.7",
            "db_instance_parameter_group_name": null,
            "db_subnet_group_name": "default",
            "deletion_protection": false,
            "enable_global_write_forwarding": false,
            "enable_http_endpoint": true,
            "enabled_cloudwatch_logs_exports": [],
            "endpoint": "restaurant-manager.cluster-czyhnv4qk082.us-east-1.rds.amazonaws.com",
            "engine": "aurora-mysql",
            "engine_mode": "serverless",
            "engine_version": "5.7.mysql_aurora.2.08.3",
            "engine_version_actual": "5.7.mysql_aurora.2.08.3",
            "final_snapshot_identifier": null,
            "global_cluster_identifier": "",
            "hosted_zone_id": "Z2R2ITUGPM61AM",
            "iam_database_authentication_enabled": false,
            "iam_roles": [],
            "id": "restaurant-manager",
            "iops": 0,
            "kms_key_id": "arn:aws:kms:us-east-1:617942035950:key/8cf03d97-6a62-4eb9-af2f-b5e5eba95c47",
            "manage_master_user_password": null,
            "master_password": "password",
            "master_user_secret": [],
            "master_user_secret_kms_key_id": null,
            "master_username": "admin",
            "network_type": "IPV4",
            "port": 3306,
            "preferred_backup_window": "04:14-04:44",
            "preferred_maintenance_window": "wed:09:33-wed:10:03",
            "reader_endpoint": "",
            "replication_source_identifier": "",
            "restore_to_point_in_time": [],
            "s3_import": [],
            "scaling_configuration": [
              {
                "auto_pause": true,
                "max_capacity": 16,
                "min_capacity": 1,
                "seconds_until_auto_pause": 300,
                "timeout_action": "RollbackCapacityChange"
              }
            ],
            "serverlessv2_scaling_configuration": [],
            "skip_final_snapshot": true,
            "snapshot_identifier": null,
            "source_region": null,
            "storage_encrypted": true,
            "storage_type": "",
            "tags": {
              "name": "restaurant manager"
            },
            "tags_all": {
              "name": "restaurant manager"
            },
            "timeouts": null,
            "vpc_security_group_ids": [
              "sg-07398cfeac41af7b0"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo3MjAwMDAwMDAwMDAwLCJkZWxldGUiOjcyMDAwMDAwMDAwMDAsInVwZGF0ZSI6NzIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "restaurant",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:617942035950:secret:restaurant-manager-secret-Th1EPH",
            "description": "RDS database admin credentials for restaurant-manager",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:617942035950:secret:restaurant-manager-secret-Th1EPH",
            "kms_key_id": "",
            "name": "restaurant-manager-secret",
            "name_prefix": "",
            "policy": "",
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "restaurant",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:617942035950:secret:restaurant-manager-secret-Th1EPH",
            "id": "arn:aws:secretsmanager:us-east-1:617942035950:secret:restaurant-manager-secret-Th1EPH|3631A1BB-3621-4B81-881E-90DAB3D83405",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:617942035950:secret:restaurant-manager-secret-Th1EPH",
            "secret_string": "{\"dbClusterIdentifier\":\"restaurant-manager\",\"engine\":\"mysql\",\"host\":\"restaurant-manager.cluster-czyhnv4qk082.us-east-1.rds.amazonaws.com\",\"password\":\"password\",\"port\":3306,\"username\":\"admin\"}",
            "version_id": "3631A1BB-3621-4B81-881E-90DAB3D83405",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "rds-secret",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:eu-central-1:617942035950:parameter/restaurant/secrets/aurora/arn",
            "data_type": "text",
            "description": "",
            "id": "/restaurant/secrets/aurora/arn",
            "insecure_value": null,
            "key_id": "",
            "name": "/restaurant/secrets/aurora/arn",
            "overwrite": null,
            "tags": {},
            "tags_all": {},
            "tier": "Standard",
            "type": "String",
            "value": "arn:aws:secretsmanager:us-east-1:617942035950:secret:restaurant-manager-secret-Th1EPH",
            "version": 1
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant",
            "module.database.aws_secretsmanager_secret_version.restaurant"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "null_resource",
      "name": "db_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "5178618747582573596",
            "triggers": {
              "file": "1fe9ad1eb5eb226041b007d0343128c2a7d27d96"
            }
          },
          "sensitive_attributes": [],
          "dependencies": [
            "module.database.aws_rds_cluster.cluster",
            "module.database.aws_secretsmanager_secret.restaurant"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "appsync-access-rds",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::617942035950:policy/restaurant-manager-appsync-rds",
            "description": "Appsync access to RDS data and secret to get user/password for database",
            "id": "arn:aws:iam::617942035950:policy/restaurant-manager-appsync-rds",
            "name": "restaurant-manager-appsync-rds",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"rds-data:DeleteItems\",\"rds-data:ExecuteSql\",\"rds-data:GetItems\",\"rds-data:InsertItems\",\"rds-data:UpdateItems\",\"rds-data:ExecuteStatement\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:rds:us-east-1:*:cluster:*\"]},{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:secretsmanager:us-east-1:*:secret:*\"]},{\"Action\":\"lambda:InvokeFunction\",\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAY7YBXFXXK4UQDI3ZM",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "appsync-lambda-policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::617942035950:policy/restaurant-appsync-lambda",
            "description": "IAM policy for AppSync to invoke a lambda",
            "id": "arn:aws:iam::617942035950:policy/restaurant-appsync-lambda",
            "name": "restaurant-appsync-lambda",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"cognito-idp:AdminDeleteUser\",\"cognito-idp:AdminDisableUser\",\"cognito-idp:AdminGetUser\",\"cognito-idp:AdminResetUserPassword\",\"cognito-idp:AdminSetUserPassword\",\"cognito-idp:SignUp\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:cognito-idp:*:*:*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAY7YBXFXXEAM47WDBM",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "appsync-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::617942035950:role/restaurant-manager-appsync",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"appsync.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-05-21T21:01:42Z",
            "description": "IAM Role for Sputnik appsync logging",
            "force_detach_policies": false,
            "id": "restaurant-manager-appsync",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::617942035950:policy/restaurant-manager-appsync-rds",
              "arn:aws:iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"
            ],
            "max_session_duration": 3600,
            "name": "restaurant-manager-appsync",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "role_last_used": [
              {
                "last_used_date": "2023-05-22T07:05:11Z",
                "region": "us-east-1"
              }
            ],
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAY7YBXFXXGWQKJXJWK"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::617942035950:role/restaurant-lambda-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-05-21T21:01:42Z",
            "description": "",
            "force_detach_policies": false,
            "id": "restaurant-lambda-role",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::617942035950:policy/restaurant-appsync-lambda"
            ],
            "max_session_duration": 3600,
            "name": "restaurant-lambda-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "role_last_used": [
              {
                "last_used_date": "2023-05-22T07:06:44Z",
                "region": "us-east-1"
              }
            ],
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAY7YBXFXXA2HR5AD6R"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "appsync-logs-policy-attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "restaurant-manager-appsync-20230521210143352900000002",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs",
            "role": "restaurant-manager-appsync"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.appsync-role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "appsync-rds-policy-attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "restaurant-manager-appsync-20230521210143310300000001",
            "policy_arn": "arn:aws:iam::617942035950:policy/restaurant-manager-appsync-rds",
            "role": "restaurant-manager-appsync"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_policy.appsync-access-rds",
            "module.iam.aws_iam_role.appsync-role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "restaurant-lambda-role-20230521210143621000000003",
            "policy_arn": "arn:aws:iam::617942035950:policy/restaurant-appsync-lambda",
            "role": "restaurant-lambda-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_policy.appsync-lambda-policy",
            "module.iam.aws_iam_role.lambda-role"
          ]
        }
      ]
    },
    {
      "module": "module.lambda",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "cognito-user",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].useast",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:617942035950:function:cognito-user-function",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "COGNITO_CLIENT_ID": "76q8o53d4tq18a11q6sqcjmnsj",
                  "COGNITO_USER_POOL": "us-east-1_ozrrxONLX"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "lambda/cognito-user-go/cognito-user.zip",
            "function_name": "cognito-user-function",
            "handler": "main",
            "id": "cognito-user-function",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:617942035950:function:cognito-user-function/invocations",
            "kms_key_arn": "",
            "last_modified": "2023-05-21T21:01:53.242+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:617942035950:function:cognito-user-function:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:617942035950:function:cognito-user-function:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::617942035950:role/restaurant-lambda-role",
            "runtime": "go1.x",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "uXqSkFZDNV7tl/+RkjLVc9H9KCCS643kZtnVzw4J7e4=",
            "source_code_size": 7596811,
            "tags": {},
            "tags_all": {},
            "timeout": 10,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.cognito.aws_cognito_user_pool.pool",
            "module.cognito.aws_cognito_user_pool_client.client",
            "module.iam.aws_iam_role.lambda-role"
          ]
        }
      ]
    }
  ],
  "check_results": []
}
